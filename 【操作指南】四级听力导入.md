# 【操作指南】四级听力一键导入

---

## 🎯 你的需求

> "我想将英语四级的听力导入进去，让听力测试专区能够匹配到真实的四级听力资源"

## ✅ 解决方案

**一条命令搞定！**

```bash
node import-cet4-listening.js
```

---

## 📦 你拥有的资源

### 原始文件（27个）
```
E:\cursor\作业\四级听力\
├── 2024年6月英语四级听力音频（第1套）.mp3
├── 2024年6月英语四级听力音频（第2套）.mp3
├── 2023年12月四级听力音频第1套.mp3
├── 2023年12月四级听力音频第2套.mp3
├── 2023年03月四级听力全1套.mp3
└── ... (共27个MP3文件)
```

---

## 🚀 导入步骤

### 步骤1️⃣：运行脚本

在项目根目录打开命令行：

```bash
node import-cet4-listening.js
```

### 步骤2️⃣：等待完成

你会看到实时进度：

```
🎧 开始导入四级听力资源...

✓ 创建音频目录: E:\cursor\作业\assets\audio\cet4-listening
✓ 读取现有 listening.json

=== 开始处理音频文件 ===

✓ cet4-2024-06-set1
  文件: 2024年6月英语四级听力音频（第1套）.mp3
  路径: assets/audio/cet4-listening/cet4-2024-06-set1.mp3

✓ cet4-2024-06-set2
  文件: 2024年6月英语四级听力音频（第2套）.mp3
  路径: assets/audio/cet4-listening/cet4-2024-06-set2.mp3

... (处理中)

==========================================
✅ 四级听力导入完成
==========================================
成功: 27 个文件
跳过: 0 个文件
总计: XX 份听力资源
==========================================

📊 资源统计：
  四级听力: 27 份
  六级听力: XX 份
  合计: XX 份

🎉 完成！现在可以在网站上使用四级听力了！
```

### 步骤3️⃣：验证结果

**检查文件**：

```
✓ assets/audio/cet4-listening/     (新创建的目录)
  ├── cet4-2024-06-set1.mp3         (27个标准化文件)
  ├── cet4-2024-06-set2.mp3
  └── ...

✓ listening.json                    (已更新，包含四级数据)
✓ listening.backup.json             (原文件备份)
```

**打开网站**：
1. 打开 `listening-micro.html`
2. 现在能看到四级听力选项了！
3. 可以播放音频进行练习

---

## 📊 导入后的效果

### 数据结构（listening.json）

```json
{
  "cet4-2024-06-set1": {
    "sections": [
      {
        "name": "Section A - News Reports",
        "audio": "assets/audio/cet4-listening/cet4-2024-06-set1.mp3",
        "transcript": "",
        "duration": "约5分钟",
        "description": "3篇新闻报道，每篇后有2个问题",
        "questions": []
      },
      {
        "name": "Section B - Conversations",
        "audio": "assets/audio/cet4-listening/cet4-2024-06-set1.mp3",
        "transcript": "",
        "duration": "约8分钟",
        "description": "两篇长对话，每篇对话后有4个问题",
        "questions": []
      },
      {
        "name": "Section C - Passages",
        "audio": "assets/audio/cet4-listening/cet4-2024-06-set1.mp3",
        "transcript": "",
        "duration": "约12分钟",
        "description": "三篇听力短文，每篇短文后有3-4个问题",
        "questions": []
      }
    ],
    "totalQuestions": 25,
    "totalDuration": "约25分钟",
    "year": 2024,
    "month": "06",
    "set": "1",
    "status": "音频已导入"
  },
  
  // ... 其他26个四级听力
}
```

### 网站界面（预期效果）

```
╔═══════════════════════════════════════╗
║      🎧 听力测试专区                  ║
╠═══════════════════════════════════════╣
║  选择考试类型：[四级] [六级]          ║
║  选择年份：[2024年] [2023年] [2022年] ║
║  选择考期：[6月] [12月] [3月] [9月]   ║
╠═══════════════════════════════════════╣
║  📝 2024年6月 四级听力（第1套）       ║
║  ┌─────────────────────────────────┐  ║
║  │ Section A - 新闻报道 (约5分钟)  │  ║
║  │ [▶️ 播放音频]                    │  ║
║  ├─────────────────────────────────┤  ║
║  │ Section B - 长对话 (约8分钟)    │  ║
║  │ [▶️ 播放音频]                    │  ║
║  ├─────────────────────────────────┤  ║
║  │ Section C - 听力短文 (约12分钟) │  ║
║  │ [▶️ 播放音频]                    │  ║
║  └─────────────────────────────────┘  ║
╚═══════════════════════════════════════╝
```

---

## 📋 导入的听力清单

| 序号 | 年份 | 考期 | 套数 | 特殊说明 |
|:----:|:----:|:----:|:----:|:--------:|
| 1 | 2024 | 6月 | 第1套 | ✅ |
| 2 | 2024 | 6月 | 第2套 | ✅ |
| 3 | 2023 | 12月 | 第1套 | ✅ |
| 4 | 2023 | 12月 | 第2套 | ✅ |
| 5 | 2023 | 6月 | 第1套 | ✅ |
| 6 | 2023 | 6月 | 第2套 | ✅ |
| 7 | 2023 | 3月 | 第1套 | ✅ |
| 8 | 2022 | 12月 | 第1套 | ✅ |
| 9 | 2022 | 12月 | 第2套 | ✅ |
| 10 | 2022 | 9月 | 全1套 | 3套相同 |
| 11 | 2022 | 6月 | 全1套 | 3套相同 |
| 12 | 2021 | 12月 | 第1套 | ✅ |
| 13 | 2021 | 12月 | 第2套 | ✅ |
| 14 | 2021 | 6月 | 第1套 | ✅ |
| 15 | 2021 | 6月 | 第2套 | ✅ |
| 16 | 2020 | 12月 | 第1套 | ✅ |
| 17 | 2020 | 12月 | 第2套 | ✅ |
| 18 | 2020 | 9月 | 第1套 | ✅ |
| 19 | 2020 | 7月 | 第1套 | ✅ |
| 20 | 2019 | 12月 | 第1套 | ✅ |
| 21 | 2019 | 12月 | 第2套 | ✅ |
| 22 | 2019 | 6月 | 第1套 | ✅ |
| 23 | 2019 | 6月 | 第2套 | 2、3套相同 |
| 24 | 2018 | 12月 | 第1套 | ✅ |
| 25 | 2018 | 12月 | 第2套 | ✅ |
| 26 | 2018 | 6月 | 第1套 | ✅ |
| 27 | 2018 | 6月 | 第2套 | ✅ |

**总计：27份完整四级听力音频** 🎉

---

## 💡 常见问题

### Q1: 原文件会被删除吗？
**A:** 不会！脚本使用 `copyFileSync`，原文件保留在 `四级听力` 文件夹。

### Q2: 如果再次运行脚本会怎样？
**A:** 会覆盖现有文件，但会先备份 `listening.json`。

### Q3: 能添加题目吗？
**A:** 可以！编辑 `listening.json`，在 `questions` 数组中添加题目数据。

### Q4: 音频文件很大，影响网站吗？
**A:** 不会。音频采用流式加载，只在播放时下载。

### Q5: 可以添加更多年份的听力吗？
**A:** 可以！将新MP3放入 `四级听力` 文件夹，重新运行脚本即可。

### Q6: 四级和六级听力结构有什么区别？
**A:** 
- **四级**: Section A (新闻报道) + Section B (长对话) + Section C (听力短文)
- **六级**: Section A (长对话) + Section B (听力短文) + Section C (讲座/讲话)

---

## 🎓 使用技巧

### 学生练习
1. **按年份选择**：从最新的开始（2024→2023→2022）
2. **按Section练习**：逐个突破
3. **反复听**：第一遍理解，第二遍记录，第三遍核对

### 教师教学
1. **课堂使用**：投屏播放，实时讲解
2. **作业布置**：指定试卷和Section
3. **模拟考试**：完整25分钟限时听力

### 自主学习
1. **制定计划**：每天1-2个Section
2. **记录笔记**：生词、短语、句型
3. **总结反思**：哪类题容易错，需要加强

---

## ✨ 优势特点

- 🚀 **一键导入** - 无需手动配置
- 📦 **自动处理** - 文件命名、路径配置全自动
- 🔄 **保留原文件** - 数据安全有保障
- 💾 **自动备份** - 修改前先备份
- 📊 **结构化数据** - 易于扩展和维护
- 🎯 **即用即得** - 导入后立即可用
- 🔧 **智能解析** - 支持多种文件命名格式

---

## 📞 技术细节

### 脚本功能
```javascript
1. 扫描 `四级听力` 文件夹
2. 解析文件名（年份、月份、套数）- 支持多种格式
3. 生成标准化ID（cet4-YYYY-MM-setN）
4. 复制文件到 assets/audio/cet4-listening/
5. 生成四级听力数据结构（3个Section）
6. 更新 listening.json
7. 创建备份
8. 输出统计报告
```

### 支持的文件名格式
1. `2024年6月英语四级听力音频（第1套）.mp3`
2. `2018.06四级真题第1套听力音频.mp3`
3. `2022年06月四级真题（3套相同）听力.mp3`
4. `2020.07四级真题听力音频.mp3`
5. `2023年03月四级听力全1套.mp3`

### 数据格式
- **试卷ID**：`cet4-2024-06-set1`
- **文件名**：`cet4-2024-06-set1.mp3`
- **音频路径**：`assets/audio/cet4-listening/cet4-2024-06-set1.mp3`

---

## 🎊 完成确认

导入成功的标志：

- ✅ 命令行显示"✅ 四级听力导入完成"
- ✅ `assets/audio/cet4-listening/` 目录存在且有27个MP3
- ✅ `listening.json` 文件大小明显增加
- ✅ `listening.backup.json` 备份文件已创建
- ✅ 打开网站能看到四级听力选项
- ✅ 点击播放按钮能正常播放音频

---

## 📚 相关文档

- 📖 **操作指南**：`【操作指南】四级听力导入.md` (本文档)
- 🔧 **导入脚本**：`import-cet4-listening.js`
- 📊 **数据文件**：`listening.json`
- 📝 **六级听力导入**：`【操作指南】六级听力导入.md`

---

## 🚀 现在就开始！

```bash
# 在项目根目录执行
node import-cet4-listening.js

# 等待完成
# 打开网站测试
# 享受四级听力练习！
```

**就这么简单！祝你导入顺利！** 🎉🎧📚

---

*创建时间: 2025年11月18日 13:32*  
*适用版本: 四六级学习站 v1.0*  
*支持听力: 2018-2024年四级真题*
