<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é˜…è¯»å¾®ç»ƒä¹  - å››å…­çº§å­¦ä¹ ç«™</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    /* è‹¹æœé£æ ¼é…è‰² */
    :root {
      --color-bg: #f5f5f7;
      --color-bg-light: #ffffff;
      --color-primary: #0071e3;
      --color-primary-hover: #0077ED;
      --color-secondary: #06c;
      --color-card: #ffffff;
      --color-text-dark: #1d1d1f;
      --color-text-light: #6e6e73;
    }
    
    body {
      background: var(--color-bg) !important;
    }
    
    .page-content {
      background: var(--color-bg);
    }
    
    .question-card {
      background: var(--color-card);
      border-radius: 18px;
      padding: 28px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      transition: all 0.3s cubic-bezier(0.28, 0.11, 0.32, 1);
      border: 1px solid rgba(0,0,0,0.08);
    }
    
    .question-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
      border-color: rgba(0,0,0,0.12);
    }
    
    .option {
      background: #f5f5f7;
      border: 2px solid transparent;
      border-radius: 12px;
      padding: 14px 18px;
      margin: 8px 0;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.95rem;
    }
    
    .option:hover {
      background: #e8e8ed;
      border-color: var(--color-primary);
    }
    
    .option.selected {
      background: #d1e7ff;
      border-color: var(--color-primary);
      font-weight: 600;
    }
    
    .option.correct {
      background: #d4edda;
      border-color: #28a745;
      color: #155724;
    }
    
    .option.wrong {
      background: #f8d7da;
      border-color: #dc3545;
      color: #721c24;
    }
    
    .btn {
      transition: all 0.3s ease;
      border-radius: 980px;
      border: none;
      font-weight: 600;
      letter-spacing: -0.01em;
      padding: 14px 32px;
      font-size: 1rem;
      cursor: pointer;
    }
    
    .btn:hover {
      transform: scale(1.02);
    }
    
    .btn:active {
      transform: scale(0.98);
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <!-- é¡µé¢æ»šåŠ¨è¿›åº¦æ¡ -->
  <div class="scroll-progress" id="scroll-progress"></div>
  
  <!-- ç®€æ´å¯¼èˆªæ  -->
  <nav class="apple-nav wehuster-nav">
    <div class="nav-container">
      <a class="nav-logo wehuster-logo" href="index.html">
        <i class="fas fa-graduation-cap"></i>
        <span class="logo-text">å››å…­çº§å­¦ä¹ ç«™</span>
      </a>
      
      <ul class="nav-menu wehuster-menu">
        <li class="nav-item"><a href="index.html" class="nav-link">é¦–é¡µ</a></li>
        <li class="nav-item"><a href="cet4.html" class="nav-link">å››çº§çœŸé¢˜</a></li>
        <li class="nav-item"><a href="cet6.html" class="nav-link">å…­çº§çœŸé¢˜</a></li>
        <li class="nav-item"><a href="translator.html" class="nav-link">é˜…è¯»ç¥å™¨</a></li>
        <li class="nav-item"><a href="listening-micro.html" class="nav-link">å¬åŠ›ç»ƒä¹ </a></li>
        <li class="nav-item"><a href="reading-micro.html" class="nav-link active">é˜…è¯»å¾®ç»ƒä¹ </a></li>
        <li class="nav-item"><a href="news.html" class="nav-link">èµ„è®¯</a></li>
        <li class="nav-item"><a href="about.html" class="nav-link">About Us</a></li>
      </ul>
      
      <div class="nav-tools">
        <button class="search-btn" id="search-toggle" aria-label="æœç´¢">
          <i class="fas fa-search"></i>
        </button>
        <button class="mobile-toggle" id="mobile-toggle" aria-label="èœå•">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
  </nav>
  
  <div class="page-content">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div style="text-align: center; margin-bottom: 3rem; animation: fadeInDown 0.6s ease-out;">
      <div style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.25rem 2.5rem; border-radius: 24px; box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4), 0 2px 8px rgba(0, 0, 0, 0.1); margin-bottom: 1.25rem; position: relative; overflow: hidden; transition: all 0.4s ease;">
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 100%); pointer-events: none;"></div>
        <h1 style="color: white; margin: 0; font-weight: 800; font-size: 2.2rem; letter-spacing: -0.02em; position: relative; z-index: 1; text-shadow: 0 2px 8px rgba(0,0,0,0.15); text-align: center;">ğŸ“– é˜…è¯»å¾®ç»ƒä¹ </h1>
      </div>
      <p style="color: #6c757d; font-size: 1.1rem; margin: 0; font-weight: 500; letter-spacing: 0.5px;"><span style="color: #667eea; font-weight: 600;">æ™ºèƒ½æŠ½é¢˜</span> Â· <span style="color: #764ba2; font-weight: 600;">å»ºç«‹ç”»åƒ</span> Â· <span style="color: #667eea; font-weight: 600;">ç²¾å‡†æ¨è</span></p>
    </div>

    <!-- ä½¿ç”¨è¯´æ˜ -->
    <div style="background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%); border-left: 5px solid #0ea5e9; border-radius: 16px; padding: 24px 28px; margin-bottom: 2rem; box-shadow: 0 8px 24px rgba(14, 165, 233, 0.15); animation: fadeInUp 0.6s ease-out;">
      <div style="display: flex; align-items: start; gap: 16px;">
        <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; box-shadow: 0 6px 20px rgba(14, 165, 233, 0.35);">
          <i class="fas fa-info-circle" style="color: white; font-size: 1.6rem; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));"></i>
        </div>
        <div style="flex: 1;">
          <h3 style="margin: 0 0 12px 0; color: #075985; font-size: 1.25rem; font-weight: 700;">ğŸ’¡ åŠŸèƒ½è¯´æ˜</h3>
          <p style="margin: 0; color: #0c4a6e; line-height: 1.8; font-size: 0.95rem;">
            <strong>é˜…è¯»å¾®ç»ƒä¹ </strong>å¸®åŠ©æ‚¨<strong>å»ºç«‹ç”¨æˆ·ç”»åƒ</strong>ï¼Œç³»ç»Ÿä¼šæ ¹æ®æ‚¨çš„ç­”é¢˜è®°å½•æ™ºèƒ½æ¨èé¢˜ç›®ã€‚
            å®Œæˆ3-5é“é¢˜åï¼Œæ‚¨å°±å¯ä»¥åœ¨<a href="listening-micro.html" style="color: #0ea5e9; font-weight: 600; text-decoration: none;">å¬åŠ›å¾®ç»ƒä¹ </a>ä¸­ä½¿ç”¨æ™ºèƒ½æŠ½é¢˜åŠŸèƒ½äº†ï¼
          </p>
        </div>
      </div>
    </div>

    <!-- æ§åˆ¶é¢æ¿ -->
    <div style="background: linear-gradient(to bottom, #ffffff 0%, #f8f9ff 100%); border-radius: 24px; padding: 2.5rem; margin-bottom: 2.5rem; box-shadow: 0 10px 40px rgba(102, 126, 234, 0.15), 0 4px 12px rgba(0, 0, 0, 0.08); border: 1px solid rgba(102, 126, 234, 0.1); animation: fadeInUp 0.6s ease-out 0.1s both;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
        <!-- é¢˜ç›®æ•°é‡ -->
        <div style="background: white; border-radius: 20px; padding: 1.5rem; border: 2px solid rgba(79, 172, 254, 0.15); box-shadow: 0 4px 16px rgba(79, 172, 254, 0.1);">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1rem;">
            <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 6px 20px rgba(79, 172, 254, 0.35);">
              <i class="fas fa-hashtag" style="color: white; font-size: 1.3rem;"></i>
            </div>
            <div>
              <h3 style="margin: 0; font-size: 1.05rem; color: #2d3436; font-weight: 700;">é¢˜ç›®æ•°é‡</h3>
              <p style="margin: 0; font-size: 0.85rem; color: #74798d;">é€‰æ‹©ç»ƒä¹ é¢˜æ•°</p>
            </div>
          </div>
          <select id="count-select" style="width: 100%; border: 1px solid rgba(0,0,0,0.12); border-radius: 8px; padding: 10px 12px; background: #ffffff; font-size: 0.95rem;">
            <option value="5">5 é“ï¼ˆå¿«é€Ÿç»ƒä¹ ï¼‰</option>
            <option value="10">10 é“ï¼ˆæ¨èï¼‰</option>
            <option value="15">15 é“ï¼ˆæ·±åº¦è®­ç»ƒï¼‰</option>
            <option value="20">20 é“ï¼ˆå®Œæ•´æµ‹è¯•ï¼‰</option>
          </select>
        </div>

        <!-- é¢˜å‹é€‰æ‹© -->
        <div style="background: white; border-radius: 20px; padding: 1.5rem; border: 2px solid rgba(255, 159, 67, 0.15); box-shadow: 0 4px 16px rgba(255, 159, 67, 0.1);">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1rem;">
            <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 6px 20px rgba(250, 112, 154, 0.35);">
              <i class="fas fa-layer-group" style="color: white; font-size: 1.3rem;"></i>
            </div>
            <div>
              <h3 style="margin: 0; font-size: 1.05rem; color: #2d3436; font-weight: 700;">é¢˜å‹é€‰æ‹©</h3>
              <p style="margin: 0; font-size: 0.85rem; color: #74798d;">ç²¾å‡†ç»ƒä¹ </p>
            </div>
          </div>
          <select id="type-select" style="width: 100%; border: 1px solid rgba(0,0,0,0.12); border-radius: 8px; padding: 10px 12px; background: #ffffff; font-size: 0.95rem;">
            <option value="all">å…¨éƒ¨é¢˜å‹</option>
            <option value="ä»”ç»†é˜…è¯»">ä»”ç»†é˜…è¯»</option>
            <option value="é•¿ç¯‡é˜…è¯»">é•¿ç¯‡é˜…è¯»</option>
            <option value="é€‰è¯å¡«ç©º">é€‰è¯å¡«ç©º</option>
          </select>
        </div>

        <!-- éš¾åº¦é€‰æ‹© -->
        <div style="background: white; border-radius: 20px; padding: 1.5rem; border: 2px solid rgba(52, 199, 89, 0.15); box-shadow: 0 4px 16px rgba(52, 199, 89, 0.1);">
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1rem;">
            <div style="background: linear-gradient(135deg, #34c759 0%, #30d158 100%); width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 6px 20px rgba(52, 199, 89, 0.35);">
              <i class="fas fa-signal" style="color: white; font-size: 1.3rem;"></i>
            </div>
            <div>
              <h3 style="margin: 0; font-size: 1.05rem; color: #2d3436; font-weight: 700;">è€ƒè¯•ç±»å‹</h3>
              <p style="margin: 0; font-size: 0.85rem; color: #74798d;">å››çº§/å…­çº§</p>
            </div>
          </div>
          <select id="level-select" style="width: 100%; border: 1px solid rgba(0,0,0,0.12); border-radius: 8px; padding: 10px 12px; background: #ffffff; font-size: 0.95rem;">
            <option value="all">ä¸é™</option>
            <option value="CET4">å››çº§</option>
            <option value="CET6">å…­çº§</option>
          </select>
        </div>
      </div>

      <!-- å¼€å§‹æŒ‰é’® -->
      <div style="text-align: center;">
        <button id="start-btn" class="btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4); font-size: 1.1rem; padding: 16px 48px;">
          <i class="fas fa-play-circle"></i> å¼€å§‹ç»ƒä¹ 
        </button>
      </div>
    </div>

    <!-- é¢˜ç›®åŒºåŸŸ -->
    <div id="questions-area" style="display: none;"></div>

    <!-- ç»“æœåŒºåŸŸ -->
    <div id="result-area" style="display: none;"></div>
  </div>

  <script>
    // æ»šåŠ¨è¿›åº¦æ¡
    window.addEventListener('scroll', () => {
      const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
      document.getElementById('scroll-progress').style.width = scrolled + '%';
    });

    // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
    document.getElementById('mobile-toggle')?.addEventListener('click', function() {
      document.querySelector('.nav-menu').classList.toggle('active');
      this.classList.toggle('active');
    });

    // é¢˜åº“æ•°æ®
    let allQuestions = [];
    let currentQuestions = [];
    let userAnswers = [];

    // åŠ è½½é¢˜ç›®æ•°æ®
    async function loadQuestions() {
      try {
        const resp = await fetch('./papers.json');
        const papers = await resp.json();
        
        // æå–æ‰€æœ‰é˜…è¯»é¢˜ç›®
        allQuestions = [];
        Object.entries(papers).forEach(([paperId, paper]) => {
          if (paper.sections) {
            Object.entries(paper.sections).forEach(([sectionId, section]) => {
              if (section.questions) {
                section.questions.forEach(q => {
                  allQuestions.push({
                    ...q,
                    paperId,
                    sectionId,
                    sectionTitle: section.title || '',
                    passage: section.passage || '',
                    level: paper.level || ''
                  });
                });
              }
            });
          }
        });
        
        console.log(`å·²åŠ è½½ ${allQuestions.length} é“é¢˜ç›®`);
      } catch (err) {
        console.error('åŠ è½½é¢˜ç›®å¤±è´¥:', err);
        alert('é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
      }
    }

    // ç­›é€‰é¢˜ç›®
    function filterQuestions(count, type, level) {
      let filtered = [...allQuestions];
      
      // æŒ‰é¢˜å‹ç­›é€‰
      if (type !== 'all') {
        filtered = filtered.filter(q => q.sectionTitle?.includes(type));
      }
      
      // æŒ‰éš¾åº¦ç­›é€‰
      if (level !== 'all') {
        filtered = filtered.filter(q => q.level === level);
      }
      
      // éšæœºæŠ½å–
      const shuffled = filtered.sort(() => 0.5 - Math.random());
      return shuffled.slice(0, parseInt(count));
    }

    // æ¸²æŸ“é¢˜ç›®
    function renderQuestions(questions) {
      const area = document.getElementById('questions-area');
      area.style.display = 'block';
      area.innerHTML = '';
      
      // é¡¶éƒ¨ä¿¡æ¯
      const banner = document.createElement('div');
      banner.style.cssText = `
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 16px;
        padding: 20px 24px;
        margin-bottom: 24px;
        color: white;
        box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
      `;
      banner.innerHTML = `
        <h3 style="margin: 0 0 8px 0; font-size: 1.3rem; font-weight: 700;">ğŸ“ å¼€å§‹ç­”é¢˜</h3>
        <p style="margin: 0; opacity: 0.95;">å…± ${questions.length} é“é¢˜ Â· å®Œæˆåè‡ªåŠ¨æäº¤</p>
      `;
      area.appendChild(banner);

      // æ¸²æŸ“æ¯é“é¢˜
      questions.forEach((q, idx) => {
        const card = document.createElement('div');
        card.className = 'question-card';
        card.dataset.qid = idx;
        
        let html = `
          <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1rem; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
              ${idx + 1}
            </div>
            <div style="flex: 1;">
              <div style="font-size: 0.85rem; color: #6c757d; margin-bottom: 4px;">
                ${q.sectionTitle || 'é˜…è¯»ç†è§£'} ${q.level ? 'Â· ' + q.level : ''}
              </div>
            </div>
          </div>
        `;
        
        // æ–‡ç« 
        if (q.passage) {
          html += `
            <div style="background: #f8f9fa; border-left: 4px solid #667eea; border-radius: 8px; padding: 16px; margin-bottom: 16px; font-size: 0.95rem; line-height: 1.8; color: #2d3436;">
              ${q.passage.replace(/\n/g, '<br>')}
            </div>
          `;
        }
        
        // é¢˜ç›®
        html += `<div style="font-size: 1.05rem; font-weight: 600; color: #1d1d1f; margin-bottom: 16px; line-height: 1.6;">${q.stem || q.question || 'é¢˜ç›®'}</div>`;
        
        // é€‰é¡¹
        if (q.options) {
          q.options.forEach((opt, oidx) => {
            const optLabel = String.fromCharCode(65 + oidx);
            html += `
              <div class="option" data-value="${optLabel}" onclick="selectOption(${idx}, '${optLabel}', this)">
                <strong>${optLabel}.</strong> ${opt}
              </div>
            `;
          });
        }
        
        card.innerHTML = html;
        area.appendChild(card);
      });

      // æäº¤æŒ‰é’®
      const submitArea = document.createElement('div');
      submitArea.style.cssText = `
        margin-top: 32px;
        padding: 24px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        text-align: center;
      `;
      submitArea.innerHTML = `
        <button id="submit-btn" class="btn" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4); font-size: 1.1rem; padding: 16px 48px;">
          <i class="fas fa-check-circle"></i> æäº¤ç­”æ¡ˆ
        </button>
      `;
      area.appendChild(submitArea);

      document.getElementById('submit-btn').addEventListener('click', submitAnswers);
    }

    // é€‰æ‹©é€‰é¡¹
    function selectOption(qid, value, elem) {
      // å–æ¶ˆåŒé¢˜å…¶ä»–é€‰é¡¹
      const card = elem.closest('.question-card');
      card.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
      
      // é€‰ä¸­å½“å‰é€‰é¡¹
      elem.classList.add('selected');
      userAnswers[qid] = value;
    }

    // æäº¤ç­”æ¡ˆ
    function submitAnswers() {
      if (userAnswers.filter(a => a).length < currentQuestions.length) {
        if (!confirm('è¿˜æœ‰é¢˜ç›®æœªä½œç­”ï¼Œç¡®å®šæäº¤å—ï¼Ÿ')) return;
      }

      let correct = 0;
      currentQuestions.forEach((q, idx) => {
        const card = document.querySelector(`[data-qid="${idx}"]`);
        const userAns = userAnswers[idx];
        const correctAns = q.answer;
        
        if (userAns === correctAns) correct++;
        
        // æ ‡è®°æ­£ç¡®/é”™è¯¯
        card.querySelectorAll('.option').forEach(opt => {
          opt.style.pointerEvents = 'none';
          if (opt.dataset.value === correctAns) {
            opt.classList.add('correct');
          } else if (opt.dataset.value === userAns && userAns !== correctAns) {
            opt.classList.add('wrong');
          }
        });
      });

      // ä¿å­˜ç­”é¢˜è®°å½•ï¼ˆå»ºç«‹ç”¨æˆ·ç”»åƒï¼‰
      saveAnswerHistory(currentQuestions, userAnswers);

      // æ˜¾ç¤ºç»“æœ
      showResult(correct, currentQuestions.length);
    }

    // ä¿å­˜ç­”é¢˜è®°å½•
    function saveAnswerHistory(questions, answers) {
      try {
        let history = JSON.parse(localStorage.getItem('reading-history') || '[]');
        const record = {
          timestamp: Date.now(),
          questions: questions.map((q, idx) => ({
            qid: q.paperId + '-' + q.sectionId + '-' + (q.id || idx),
            type: q.sectionTitle,
            level: q.level,
            userAnswer: answers[idx],
            correctAnswer: q.answer,
            correct: answers[idx] === q.answer
          }))
        };
        history.push(record);
        
        // åªä¿ç•™æœ€è¿‘50æ¬¡è®°å½•
        if (history.length > 50) history = history.slice(-50);
        
        localStorage.setItem('reading-history', JSON.stringify(history));
        console.log('âœ… ç”¨æˆ·ç”»åƒå·²æ›´æ–°');
      } catch (err) {
        console.error('ä¿å­˜è®°å½•å¤±è´¥:', err);
      }
    }

    // æ˜¾ç¤ºç»“æœ
    function showResult(correct, total) {
      const score = Math.round((correct / total) * 100);
      
      const resultArea = document.getElementById('result-area');
      resultArea.style.display = 'block';
      resultArea.innerHTML = `
        <div style="background: ${score >= 60 ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)' : 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)'}; border-radius: 16px; padding: 32px; margin: 24px 0; color: white; text-align: center; box-shadow: 0 8px 24px ${score >= 60 ? 'rgba(16, 185, 129, 0.4)' : 'rgba(245, 158, 11, 0.4)'};">
          <div style="font-size: 4rem; margin-bottom: 16px;">${score >= 60 ? 'ğŸ‰' : 'ğŸ’ª'}</div>
          <h2 style="margin: 0 0 12px 0; font-size: 2.5rem; font-weight: 800;">${score}åˆ†</h2>
          <p style="margin: 0; font-size: 1.2rem; opacity: 0.95;">ç­”å¯¹ ${correct} é¢˜ï¼Œå…± ${total} é¢˜</p>
          <p style="margin: 12px 0 0; font-size: 1rem;">${score >= 85 ? 'ä¼˜ç§€ï¼ç»§ç»­ä¿æŒï¼' : score >= 60 ? 'åŠæ ¼äº†ï¼Œè¿˜æœ‰æå‡ç©ºé—´ï¼' : 'éœ€è¦å¤šåŠ ç»ƒä¹ å“¦ï¼'}</p>
        </div>

        <div style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); text-align: center;">
          <p style="margin: 0 0 20px; color: #6c757d; font-size: 1rem;">
            âœ… ç”¨æˆ·ç”»åƒå·²å»ºç«‹ï¼ç°åœ¨å¯ä»¥ä½¿ç”¨<a href="listening-micro.html" style="color: #667eea; font-weight: 600; text-decoration: none;">å¬åŠ›å¾®ç»ƒä¹ </a>çš„æ™ºèƒ½æŠ½é¢˜åŠŸèƒ½äº†
          </p>
          <button class="btn" onclick="location.reload()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); margin-right: 12px;">
            <i class="fas fa-redo"></i> å†æ¥ä¸€ç»„
          </button>
          <button class="btn" onclick="location.href='listening-micro.html'" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);">
            <i class="fas fa-headphones"></i> å»å¬åŠ›ç»ƒä¹ 
          </button>
        </div>
      `;

      // æ»šåŠ¨åˆ°ç»“æœ
      resultArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // å¼€å§‹ç»ƒä¹ 
    document.getElementById('start-btn').addEventListener('click', async () => {
      if (allQuestions.length === 0) {
        await loadQuestions();
      }

      const count = document.getElementById('count-select').value;
      const type = document.getElementById('type-select').value;
      const level = document.getElementById('level-select').value;

      currentQuestions = filterQuestions(count, type, level);
      userAnswers = new Array(currentQuestions.length).fill(null);

      if (currentQuestions.length === 0) {
        alert('æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„é¢˜ç›®ï¼Œè¯·è°ƒæ•´ç­›é€‰æ¡ä»¶');
        return;
      }

      renderQuestions(currentQuestions);
      
      // æ»šåŠ¨åˆ°é¢˜ç›®åŒºåŸŸ
      document.getElementById('questions-area').scrollIntoView({ behavior: 'smooth' });
    });

    // é¡µé¢åŠ è½½æ—¶é¢„åŠ è½½é¢˜ç›®
    window.addEventListener('DOMContentLoaded', loadQuestions);
  </script>
</body>
</html>
